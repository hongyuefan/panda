webpackJsonp([9],{182:function(t,e,n){function s(t){n(321)}var o=n(82)(n(262),n(389),s,"data-v-0a5777e0",null);t.exports=o.exports},188:function(t,e,n){"use strict";e.__esModule=!0;var s=n(85),o=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t}},262:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(188),o=n.n(s),a=n(83),i=n(43),r=(n.n(i),n(42));e.default={data:function(){return{confirmTitle:"提示",confirmMessage:"确定执行此操作吗？",agreementText:"",price:10,isLottery:!0,time60s:0,timer:null}},mounted:function(){var t=this;this.$store.dispatch("getTransaction",{params:{page:0,perpage:10,order:"desc",sort:"amount",amount:"",type:6,txhash:t.luckdrawHash},cb:function(t,e){e.info.length&&n.i(i.Toast)({message:e.info[0].status,position:"middle",duration:2e3})}})},watch:{isLottery:function(){var t=this;this.isLottery||(this.timer=setInterval(function(){t.time60s>0?t.time60s=t.time60s-1:(clearInterval(t.timer),t.timer=null,t.time60s=0,t.isLottery=!0)},1e3))}},computed:o()({},n.i(a.a)({english:function(t){return t.english},user:function(t){return t.user},balance:function(t){return t.balance},transaction:function(t){return t.api.transaction},luckdrawHash:function(t){return t.api.luckdrawHash}})),components:{MessageBox:i.MessageBox,Toast:i.Toast},methods:{lotteryFn:function(){var t=this;i.MessageBox.confirm("您确定花费"+t.price+"个币进行抽奖吗？","").then(function(e){t.balance<t.price?n.i(i.Toast)({message:"余额不足，请充值后再试！",position:"middle",duration:2e3}):t.$store.dispatch("getLuckdrawHash",{params:{spend:t.price},cb:function(e,s){s?(t.$store.dispatch("setBalance",t.balance-t.price),n.i(i.Toast)({message:"抽奖完成，请一分钟后查询结果！",position:"middle",duration:2e3}),t.isLottery=!1,t.time60s=60):e&&n.i(i.Toast)({message:e.message,position:"middle",duration:2e3})}})}).catch(function(t){})},resultFn:function(){var t=this;r.a.getLuckresult({id:t.user.memberId}).then(function(e){e&&(n.i(i.Toast)({message:e.message,position:"middle",duration:2e3}),t.isLottery=!0)}).catch(function(t){n.i(i.Toast)({message:t.message,position:"middle",duration:2e3})})},protocol:function(){this.$router.push({name:"Agreement"})},getProtocolAgreement:function(){this.$store.dispatch("getAgreement",{params:{type:"luckdraw"}})}}}},283:function(t,e,n){e=t.exports=n(176)(!0),e.push([t.i,".lottery[data-v-0a5777e0]{margin:200px auto 10px}","",{version:3,sources:["/Users/huigeek/lxh/myPro/github/Hcat/src/pages/lottery.vue"],names:[],mappings:"AACA,0BACE,sBAAwB,CACzB",file:"lottery.vue",sourcesContent:["\n.lottery[data-v-0a5777e0] {\n  margin: 200px auto 10px;\n}\n"],sourceRoot:""}])},321:function(t,e,n){var s=n(283);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n(177)("62b310ee",s,!0,{})},389:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("mt-header",{attrs:{fixed:""}},[n("router-link",{attrs:{slot:"left",to:"/home"},slot:"left"},[n("mt-button",{attrs:{icon:"back"}},[t._v("返回")])],1)],1),t._v(" "),n("div",{staticClass:"tac lottery"},[t.isLottery?n("div",[n("mt-button",{attrs:{type:"default"},nativeOn:{click:function(e){return t.lotteryFn(e)}}},[t.english?n("span",[t._v("Lottery")]):n("span",[t._v("抽奖")])])],1):n("div",[n("mt-button",{attrs:{type:"default"},nativeOn:{click:function(e){return t.resultFn(e)}}},[t.english?n("span",[t._v("Lottery")]):n("span",[t._v("查询结果")])])],1)]),t._v(" "),n("div",{staticClass:"tac"},[n("span",{on:{click:t.protocol}},[t.english?n("span",[t._v("Protocol content")]):n("span",[t._v("查看协议内容")])])])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=9.beedd355fdf0d2d31b06.js.map